# Software Design Document

## 1. Архітектура

Архітектура системи модульна, з розділенням логіки на три основні рівні:
- **Рівень управління** (керування станами та мережевим з’єднанням)
- **Логічний рівень** (повторні передачі, обробка таймерів)
- **Мережевий рівень** (реалізація UDP-зв’язку)

## 2. Компоненти

Система складається з наступних основних модулів:

- **Модуль ініціалізації**
  - Налаштовує початкові параметри мережевого менеджера.
  - Встановлює інтервали таймерів.

- **Модуль повторної передачі**
  - Перевіряє стан доставки повідомлення.
  - Виконує повторну передачу відповідно до встановленого циклу.

- **Модуль таймера**
  - Створює та керує таймерами для циклічної передачі NM повідомлень.
  - Перезапускає таймери згідно з `UdpNmMsgCycleTime`.

- **Модуль вивільнення мережі**
  - Завершує сеанс роботи в мережі.
  - Викликає `UdpNm_NetworkRelease`.

## 3. Потоки даних

### Сценарій: Ініціалізація мережі
- Користувач або система викликає ініціалізацію
- Встановлюються параметри передачі
- Запускаються таймери

### Сценарій: Відправка NM повідомлення
- Таймер викликає подію відправки
- Формується UDP повідомлення
- Якщо відповідь не отримана — повторна передача

### Сценарій: Завершення роботи
- Перевіряється наявність активних зв’язків
- Викликається функція звільнення мережі
- Система переходить у режим очікування

## 4. Сховище даних 

Оскільки система працює в режимі керування мережею, явного сховища даних не передбачено. Внутрішні параметри та конфігурація зберігаються у змінних середовища або конфігураційних структурах в оперативній пам’яті.

## 5. Інтерфейси

### 5.1 Внутрішні API

- `UdpNm_NetworkRequest()` — запит на активацію мережі
- `UdpNm_NetworkRelease()` — команда на вивільнення
- `UdpNm_MainFunction()` — обробка періодичних подій
- `UdpNm_TriggerTransmit()` — викликається при необхідності передачі

### 5.2 Інтерфейс з таймером

- `StartTimer(duration)`
- `IsTimerExpired()`
- `RestartTimer()`

## 6. Розширення

У майбутньому можлива інтеграція з іншими транспортними протоколами (TCP), реалізація обробки помилок з повторною маршрутизацією, підтримка QoS.

## 7. Вимоги до реалізації

- Реалізація у вигляді вбудованого C-модуля
- Придатність до інтеграції в AUTOSAR-сумісне середовище
- Мінімальне використання ресурсів (пам’ять, процесорний час)
